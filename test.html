<!DOCTYPE html>
<html>
<head>
  <title>Wallet Test</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js"></script>
</head>
<body>

<h2>Connect Wallet</h2>
<button onclick="connectWallet()">Connect</button>

<p id="address"></p>
<p id="balance"></p>

<script>
async function connectWallet() {
  try {
    if (!window.ethereum) {
      alert("No wallet detected. Open inside Trust Wallet browser.");
      return;
    }

    alert("Wallet detected. Requesting connection...");

    const provider = new ethers.BrowserProvider(window.ethereum);

    await provider.send("eth_requestAccounts", []);

    alert("Connected. Getting signer...");

    const signer = await provider.getSigner();
    const address = await signer.getAddress();

    alert("Address received: " + address);

    const balance = await provider.getBalance(address);

    document.getElementById("address").innerText =
      "Address: " + address;

    document.getElementById("balance").innerText =
      "ETH Balance: " + ethers.formatEther(balance);

    alert("Balance displayed.");
  } catch (error) {
    alert("Error: " + error.message);
    console.error(error);
  }
}
</script>
